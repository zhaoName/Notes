
# 数据链路层 - 概述


<br>

## 一、

<br>

## 二、三个基本问题

### 0x01 封装成帧

封装成帧 (framing) 就是在一段数据的前后分别添加首部和尾部，这样就构成一个帧。接收方在收到物理层上交的比特流后，能够根据首部和尾部的标记识别出帧的开始和结束。

![](../Images/Network/DataLinkLayerOverview/DataLinkLayerOverview_images01.png)

一个帧的帧长等于帧的数据部分加上帧首部和帧尾部的长度。首部和尾部的一个重要作用就是进行帧界定。在发送帧时，需从帧首部开始发送，为了提高帧的传输效率，应当是帧的数据部分长度尽可能地大于首部和尾部的长度。但数据链路层也规定了所能传送的帧的**数据部分长度上限** - 最大传送单元 MTU (Maximum Transfer Unit)。

我们通常用不可打印的 ASCII 码来当作帧界定符。

- 控制字符 SOH (Start Of Header) 放在帧的最前面，表示帧的首部开始，十六进制编码为 0x01。

- 控制字符 EOT (End Of Transmission) 表示帧结束，十六进制编码为 0x04。

- 注意 SOH (或 EOT) 并不表示 S、O、H (或 E、O、T) 三个字符。

![](../Images/Network/DataLinkLayerOverview/DataLinkLayerOverview_images02.png)


### 0x02 透明传输

当数据是非 ASCII 码的文本文件时 (如二进制代码图像)，若某个字节的二进制代码刚好和 SOH 或 EOT 字符一样，那数据链路层会错误的找到边界，把部分帧收下，把剩下的那部分帧丢弃。

![](../Images/Network/DataLinkLayerOverview/DataLinkLayerOverview_images03.png)

数据链路层的透明传输：表示无论所传数据是什么样的比特组合，都能够按照原样无差错的通过数据链路层。因此这些数据就 "看不见" 数据链路层有什么妨碍数据传输的东西。

![](../Images/Network/DataLinkLayerOverview/DataLinkLayerOverview_images04.png)

为解决透明传输问题，可使用字符填充 (character stuffing)，也叫字节填充 (byte stuffing)

- 发送端数据链路层数据在出现控制字符 (SOH 或 EOT) 的前面插入转移字符 ESC (十六进制 1B，二进制 0011011)

- 发送端数据链路层数据在出现转义字符 (ESC) 的前面再插入转义字符 ESC，接收端收到两个连续转义字符就会删除前面的一个。

### 0x03 差错检验

<br>


<br>


<br>