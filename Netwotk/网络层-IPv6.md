# 网络层 - IPv6

<br>


## 一、IPv6 Address

### 0x01 简介

众所周知 32 位的 IPv4 地址已经用完，早在多年前大佬们又推出 128 位的 IPv6 地址，这么庞大的地址数够现有地球人每人拥有上千的 IP 地址。

IPv6 使用冒号将 128 位的二进制数分成 8 个 16 bit 的数组，每个数组一般用 4 个十六进制位表示。

- 完整格式：`F00D:5678:0000:0000:8:987A:200C:4A7A`

- 压缩格式：一连串的 0 可用一对冒号表示，上面 IPv6 地址也可表示为 `F00D:5678::8:987A:200C:4A7A`。但注意一对冒号(::) 在一个地址中只能出现一次。

- 当涉及到 IPv4 和 IPv6 的混合环境时，也可使用 x:x:x:x:x:x:d.d.d.d (x 十六进制，d 十进制) 表示。如 `0:0:0:0:0:0:192.168.1.1`，压缩格式为 `::192.168.1.1`

- 地址前缀长度表示法 `F00D:5678:0000:0000:8:987A:200C:4A7A/64`

### 0x02 IPv6 地址类型

#### 单播地址 Unicast

单播地址是点对点通信时使用的地址，此地址仅标识一个接口。单播地址包含：全球单播地址、未指定地址、环回地址。全球单播地址格式如下

```
+------------------------+-----------+----------------------------+
|         n bits         |   m bits  |       128-n-m bits         |
+------------------------+-----------+----------------------------+
| global routing prefix  | subnet ID |       interface ID         |
+------------------------+-----------+----------------------------+
```



#### 多播地址 Multcast

#### 任播地址 Anycast

<br>

## 二、首部

```
IPv6 Header Format

0      		   7    		  15     			23  		  31
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|Version| Traffic Class |           Flow Label                  |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|         Payload Length        |  Next Header  |   Hop Limit   |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                                                               |
+                                                               +
|                                                               |
+                         Source Address                        +
|                                                               |
+                                                               +
|                                                               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                                                               |
+                                                               +
|                                                               |
+                      Destination Address                      +
|                                                               |
+                                                               +
|                                                               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
```





<br>


<br>


<br>

参考：

- [IP Version 6 Addressing Architecture](https://tools.ietf.org/html/rfc4291)

- [Internet Protocol, Version 6 (IPv6) Specification](https://tools.ietf.org/html/rfc8200)

<br>